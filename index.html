<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
<title>ZOORANDHAR</title>
<style>
html,body{
  margin:0;
  padding:0;
  overflow:hidden;
  background:#1e1e2f;
  font-family:Arial, sans-serif;
  height:100%;
}

#gameCanvas{
  display:block;
  background:#4a90e2;
  touch-action:none;
}

#score{
  position:fixed;
  top:15px;
  left:50%;
  transform:translateX(-50%);
  color:white;
  font-size:28px;
  font-weight:bold;
  z-index:10;
}

#startScreen, #gameOverScreen{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  background:rgba(0,0,0,0.7);
  color:white;
  z-index:20;
  text-align:center;
  padding:20px;
}

button{
  padding:12px 25px;
  font-size:18px;
  margin-top:15px;
  cursor:pointer;
  border:none;
  border-radius:8px;
}

img{
  max-width:80%;
  height:auto;
}
</style>
</head>
<body>

<div id="score">0</div>

<div id="startScreen">
<h1>ZOORANDHAR</h1>
<p>Tap Anywhere to Fly</p>
<button onclick="startGame()">Start Game</button>
</div>

<div id="gameOverScreen" style="display:none;">
<img src="gameover.jpeg">
<h2>Game Over</h2>
<button onclick="restartGame()">Restart</button>
</div>

<canvas id="gameCanvas"></canvas>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

function resizeCanvas(){
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;
}
resizeCanvas();
window.addEventListener("resize", resizeCanvas);

const playerImg = new Image();
playerImg.src = "player.jpeg";

const obstacleImg = new Image();
obstacleImg.src = "obstacle.png";

let gravity = 0.4;
let lift = -8;
let speed = 1;

let player, pipes, score, gameRunning;

function init(){
player = {
  x: canvas.width * 0.2,
  y: canvas.height * 0.4,
  width: 60,
  height: 60,
  velocity:0
};

pipes = [];
score = 0;
gameRunning = false;
document.getElementById("score").innerText = score;
}

function startGame(){
document.getElementById("startScreen").style.display = "none";
document.getElementById("gameOverScreen").style.display = "none";
init();
gameRunning = true;
animate();
}

function restartGame(){
startGame();
}

function jump(){
if(gameRunning)
player.velocity = lift;
}

document.addEventListener("keydown", e=>{
if(e.code === "Space") jump();
});

canvas.addEventListener("mousedown", jump);
canvas.addEventListener("touchstart", jump);

function createPipe(){
let gap = canvas.height * 0.35; // responsive gap
let topHeight = Math.random()*(canvas.height*0.4) + 40;

pipes.push({
  x: canvas.width,
  top: topHeight,
  bottom: canvas.height - topHeight - gap,
  width:70,
  passed:false
});
}

function drawPlayer(){
ctx.drawImage(playerImg, player.x, player.y, player.width, player.height);
}

function drawPipes(){
pipes.forEach(pipe=>{
  ctx.drawImage(obstacleImg, pipe.x, 0, pipe.width, pipe.top);
  ctx.drawImage(obstacleImg, pipe.x, canvas.height - pipe.bottom, pipe.width, pipe.bottom);
});
}

function update(){
player.velocity += gravity;
player.y += player.velocity;

if(player.y < 0 || player.y + player.height > canvas.height)
endGame();

pipes.forEach(pipe=>{
pipe.x -= speed;

if(player.x < pipe.x + pipe.width &&
   player.x + player.width > pipe.x &&
   (player.y < pipe.top || player.y + player.height > canvas.height - pipe.bottom)){
endGame();
}

if(!pipe.passed && pipe.x + pipe.width < player.x){
pipe.passed = true;
score++;
document.getElementById("score").innerText = score;
}
});

pipes = pipes.filter(p=>p.x + p.width > 0);
}

function draw(){
ctx.clearRect(0,0,canvas.width,canvas.height);
drawPlayer();
drawPipes();
}

let frame = 0;

function animate(){
if(!gameRunning) return;

frame++;
if(frame % 160 === 0) createPipe();

update();
draw();
requestAnimationFrame(animate);
}

function endGame(){
gameRunning = false;
document.getElementById("gameOverScreen").style.display = "flex";
}

init();
</script>

</body>
</html>
